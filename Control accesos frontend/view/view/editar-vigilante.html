<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Vigilante</title>
    <link rel="stylesheet" href="/css/estilos.css">

    <style>
        .btn-back {
            background: #ff4d4d;
            color: white;
            padding: 8px 16px;
            border: none;
            border-radius: 6px;
            font-size: 15px;
            cursor: pointer;
            transition: 0.3s;
        }
        .btn-back:hover {
            background: #ff6b6b;
        }

        .back-container {
            width: 95%;
            display: flex;
            justify-content: flex-end; /* Derecha */
            margin: 15px auto 5px auto;
        }
    </style>
</head>

<body>

    <nav class="navbar">
        <div class="navbar-brand">CONTROL DE ACCESOS</div>
    </nav>

    <!-- BOTÓN REGRESAR ARRIBA A LA DERECHA -->
    <div class="back-container">
        <button class="btn-back" onclick="location.href='vigilantes.html'">⮜ Regresar</button>
    </div>

    <main style="padding: 25px 30px;">

        <h1 style="margin-bottom: 18px; color:#007bff; font-size: 28px;">
            Editar Vigilante
        </h1>

        <!-- CENTRAR CARD -->
        <div style="display: flex; justify-content: center;">

            <div style="
                background: white;
                padding: 20px 24px;
                max-width: 600px;
                width: 100%;
                border-radius: 10px;
                box-shadow: 0px 2px 8px rgba(0,0,0,0.1);
                box-sizing: border-box;
            ">

                <form id="formularioEdicion">

                    <div style="margin-bottom: 18px;">
                        <label for="idVigilante">ID Vigilante:</label><br>
                        <input 
                            type="number" 
                            id="idVigilante"
                            readonly
                            style="margin-top: 6px; width: 100%; height: 36px; box-sizing: border-box; background:#f0f0f0;">
                    </div>

                    <div style="margin-bottom: 18px;">
                        <label for="nombre">Nombre:</label><br>
                        <input 
                            type="text" 
                            id="nombre"
                            required
                            style="margin-top: 6px; width: 100%; height: 36px; box-sizing: border-box;">
                    </div>

                    <div style="margin-bottom: 18px;">
                        <label for="apellido">Apellido:</label><br>
                        <input 
                            type="text" 
                            id="apellido"
                            required
                            style="margin-top: 6px; width: 100%; height: 36px; box-sizing: border-box;">
                    </div>

                    <div style="margin-bottom: 18px;">
                        <label for="idTurno">ID Turno:</label><br>
                        <input 
                            type="number" 
                            id="idTurno"
                            required
                            style="margin-top: 6px; width: 100%; height: 36px; box-sizing: border-box;">
                    </div>

                    <div style="margin-bottom: 22px;">
                        <label for="idAdministrador">ID Administrador:</label><br>
                        <input 
                            type="number" 
                            id="idAdministrador"
                            required
                            style="margin-top: 6px; width: 100%; height: 36px; box-sizing: border-box;">
                    </div>

                    <button 
                        type="button" 
                        id="btnEditar" 
                        class="btn btn-warning"
                        style="margin-right: 12px;">
                        Actualizar Vigilante
                    </button>

                    <a 
                        href="vigilantes.html"
                        class="btn"
                        style="color: purple; font-weight: bold;">
                        Cancelar
                    </a>

                </form>

            </div>
        </div>

    </main>

    <script src="/js/putVigilante.js"></script>

    <script>
        // OBTENER ID POR URL
        const params = new URLSearchParams(window.location.search);
        const id = params.get("id");

        if (id) {
            document.getElementById("idVigilante").value = id;

            fetch(`https://localhost:44331/api/Vigilante/${id}`)
                .then(res => res.json())
                .then(v => {
                    document.getElementById("nombre").value = v.Nombre;
                    document.getElementById("apellido").value = v.Apellido;
                    document.getElementById("idTurno").value = v.IdTurno;
                    document.getElementById("idAdministrador").value = v.IdAdministrador;
                })
                .catch(err => console.error("Error cargando vigilante:", err));
        }
    </script>

</body>
</html>


